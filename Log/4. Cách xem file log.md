# 1. CÃ¡ch xem file log

- Äá»ƒ xem file log chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng má»™t sá»‘ phÆ°Æ¡ng phÃ¡p phá»• biáº¿n sau:

- vi: ChÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng trÃ¬nh soáº¡n tháº£o vi Ä‘á»ƒ kiá»ƒm tra file log.

- tail: Náº¿u chÃºng ta muá»‘n xem ná»™i dung cá»§a file log theo thá»i gian thá»±c á»©ng dá»¥ng Ä‘ang ghi vÃ o Ä‘Ã³, hÃ£y sá»­ dá»¥ng tail -f.

- grep: Náº¿u chÃºng ta biáº¿t chÃ­nh xÃ¡c nhá»¯ng gÃ¬ Ä‘ang tÃ¬m kiáº¿m trong file log hÃ£y sá»­ dá»¥ng lá»‡nh grep Ä‘á»ƒ grep má»™t máº«u.

- NgoÃ i ra cÃ²n nhiá»u phÆ°Æ¡ng phÃ¡p khÃ¡c Ä‘á»ƒ kiá»ƒm tra file log.

# 2. grep:

## TÃ¬m má»™t chuá»—i trong má»™t file: 

- ÄÃ¢y lÃ  cÃ¡ch sá»­ dá»¥ng cÆ¡ báº£n vÃ  hay gáº·p nháº¥t, náº¿u Ä‘Æ¡n gá»‰an báº¡n muá»‘n tÃ¬m má»™t chuá»—i nÃ o Ä‘Ã³ trong chá»‰ má»™t file duy nháº¥t thÃ¬ cÃ³ thá»ƒ dÃ¹ng theo cÃº phÃ¡p sau :

        $ grep "chuoi" ten_file

- Káº¿t qá»§a sáº½ hiá»ƒn thá»‹ ngay trÃªn mÃ n hÃ¬nh command line theo dÃ²ng nÃ o cÃ³ chá»©a chuá»—i sáº½ hiá»ƒn thá»‹ cáº£ dÃ²ng trong file Ä‘Ã³ ra vÃ  chuá»—i Ä‘Ã³ sáº½ Ä‘Æ°á»£c highlight.

## TÃ¬m chuá»—i trong nhiá»u file cÃ¹ng lÃºc

Äá»ƒ lÃ m Ä‘Æ°á»£c viá»‡c nÃ y thÃ¬ báº¡n cáº§n chá»‰ Ä‘á»‹nh pattern chung cá»§a cÃ¡c file muá»‘n thá»±c hiá»‡n tÃ¬m kiáº¿m :

$ grep "chuoi" file_pattern

VÃ­ dá»¥, tÃ´i tÃ¬m chuá»—i Error trong táº¥t cáº£ cÃ¡c file log mÃ  chÃºng Ä‘Æ°á»£c ghi theo tá»«ng ngÃ y vá»›i for mat report_ddmmyyyy.log :

$ grep "chuoi" report_*.log

Khi nÃ y káº¿t qá»§a tÃ¬m kiáº¿m sáº½ hiá»ƒn thá»‹ ra thÃªm cáº£ tÃªn file mÃ  cÃ³ chá»©a chuá»—i Error dáº¡ng :

report_01082016.log: <ná»™i dung match á»Ÿ Ä‘Ã¢y>

report_01082016.log: <ná»™i dung match á»Ÿ Ä‘Ã¢y>

...
report_28082016.log: <ná»™i dung match á»Ÿ Ä‘Ã¢y>

report_28082016.log: <ná»™i dung match á»Ÿ Ä‘Ã¢y>

report_29082016.log: <ná»™i dung match á»Ÿ Ä‘Ã¢y>

##  TÃ¬m kiáº¿m khÃ´ng phÃ¢n biá»‡t hoa thÆ°á»ng

BÃ¬nh thÆ°á»ng náº¿u báº¡n Ä‘Ã£ cháº¯c cháº¯n chuá»—i mÃ¬nh Ä‘á»‹nh tÃ¬m kiáº¿m nhÆ° nÃ o vÃ  chá»‰ muá»‘n cÃ³ káº¿t qá»§a match 100% chuá»—i Ä‘Ã³ thÃ¬ ko cáº§n sá»­ dá»¥ng thÃªm lá»±a chá»n -i, khi khai bÃ¡o thÃªm nÃ³ grep sáº½ thá»±c hiá»‡n tÃ¬m kiáº¿m gáº§n Ä‘Ãºng theo kiá»ƒu khÃ´ng phÃ¢n biá»‡t kÃ½ tá»± hoa thÆ°á»ng :

$ grep -i "chuoi" ten_file

NhÆ° vÃ­ dá»¥ trÃªn thÃ¬ dÃ¹ lÃ  Error, error hay ERROR ... Ä‘i chÄƒng ná»¯a thÃ¬ báº¡n cÅ©ng sáº½ nháº­n Ä‘Æ°á»£c káº¿t qá»§a.

##  TÃ¬m kiáº¿m theo regular expression

NhÆ° bao ngÃ´n ngá»¯ láº­p trÃ¬nh, viá»‡c tÃ¬m kiáº¿m theo regular expression luÃ´n Ä‘Æ°á»£c há»— trá»£ thÃ¬ lá»‡nh grep cÅ©ng váº­y, báº¡n hoÃ n toÃ n cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh biá»ƒu thá»©c chÃ­nh quy Ä‘á»ƒ tÃ¬m kiáº¿m chuá»—i match vá»›i nÃ³.

$ grep "regex_here" ten_file

Trong grep thÃ¬ nÃ³ cÅ©ng giá»‘ng cÃ¡c ngÃ´n ngá»¯ khÃ¡c, vÃ­ dá»¥ [A-z] tá»©c lÃ  match vá»›i chá»‰ kÃ­ tá»± alpha tá»« A lá»›n Ä‘áº¿n z nhá», hay dÃ¹ng [^text] lÃ  ko chá»©a chuá»—i text...

##  TÃ¬m chÃ­nh xÃ¡c vá»›i grep -w

Náº¿u báº¡n tÃ¬m kiáº¿m theo nhá»¯ng lá»‡nh trÃªn thÃ¬ káº¿t qá»§a tráº£ vá» sáº½ chÆ°a háº³n theo Ä‘Ãºng mong muá»‘n cá»§a báº¡n. Káº¿t qá»§a thÆ°á»ng sáº½ thá»«a so vá»›i yÃªu cáº§u bá»Ÿi vÃ¬ grep sáº½ tÃ¬m theo cáº£ chuá»—i con, vÃ­ dá»¥ tÃ¬m no thÃ¬ not, nothing cÅ©ng cÃ³ chá»©a chuá»—i no nÃªn cÅ©ng sáº½ tráº£ vá» káº¿t qá»§a. Do Ä‘Ã³, náº¿u báº¡n muá»‘n tÃ¬m chÃ­nh xÃ¡c tá»« mong muá»‘n thÃ¬ cÃ³ thá»ƒ dÃ¹ng lá»±a chá»n -w.

$ grep -i "is" demo_file

## Hiá»ƒn thá»‹ thÃªm dÃ²ng trÆ°á»›c, sau, xung quanh dÃ²ng chá»©a káº¿t qá»§a

CÃ³ nhá»¯ng trÆ°á»ng há»£p báº¡n pháº£i thao tÃ¡c vá»›i file ráº¥t lá»›n, nÃªn cÃ³ thá»ƒ lá»±a chá»n tÃ¬m kiáº¿m mÃ  cÃ³ hiá»ƒn thá»‹ ra cÃ¡c dÃ²ng trÆ°á»›c, sau hoáº·c xung quanh dÃ²ng káº¿t qá»§a sáº½ cÃ³ thá»ƒ há»¯u Ã­ch.

$ grep -<A, B hoáº·c C> <n> "chuoi" demo_file

-- A : lÃ  after

-- B : lÃ  before

-- C : lÃ  xung quanh

-- n : lÃ  sá»‘ tá»± nhiÃªn chá»‰ Ä‘á»‹nh xem hiá»ƒn thá»‹ trÆ°á»›c, sau hay xung quang bao nhiÃªu dÃ²ng

VÃ­ dá»¥

$ grep -B 3 -iw "chuoi" demo_file

-- Tá»©c lÃ  hiá»ƒn thá»‹ trÆ°á»›c káº¿t qá»§a thÃªm ná»™i dung cá»§a 3 dÃ²ng ná»¯a. KhÃ´ng phÃ¢n biá»‡t hoa thÆ°á»ng vÃ  tÃ¬m chÃ­nh xÃ¡c

## TÃ¬m táº¥t cáº£ cÃ¡c file á»Ÿ táº¥t cáº£ cÃ¡c thÆ° má»¥c con

ÄÃ´i khi báº¡n khÃ´ng biáº¿t file á»Ÿ Ä‘Ã¢u trong thÆ° má»¥c ráº¥t nhiá»u file, khÃ´ng nhá»› tÃªn file lÃ  gÃ¬ hoáº·c Ä‘Æ¡n gá»‰an lÃ  muá»‘n tÃ¬m kiáº¿m vá»›i tá»« khÃ³a xem nÃ³ cÃ³ trong nhÆ°ng file nÃ o trong thÆ° má»¥c hiá»‡n hÃ nh. LÃºc Ä‘Ã³, lá»±a chá»n -r sáº½ há»¯u Ã­ch. Náº¿u khai bÃ¡o lá»±a chá»n nÃ y thÃ¬ nÃ³ sáº½ tÃ¬m Ä‘áº¿n táº­n cÃ¹ng cÃ¡c thÆ° má»¥c con, táº¥t cáº£ cÃ¡c file cÃ³ trog chÃºng.

$ grep -r "chuoi" *

ÄÆ°Æ¡ng nhiÃªn báº¡n váº«n cÃ³ thá»ƒ tÃ¬m file pattern

$ grep -r "chuoi" file_name_*

## TÃ¬m kiáº¿m ngÆ°á»£c

Vá»›i nhá»¯ng lá»±a chá»n trÃªn báº¡n cÃ³ thá»ƒ tÃ¬m kiáº¿m tá»« khÃ³a theo nhá»¯ng hoÃ n cáº£nh cá»§a riÃªng mÃ¬nh, nhÆ°ng náº¿u báº¡n muá»‘n ngÆ°á»£c láº¡i tá»©c lÃ  chá»‰ tÃ¬m nhá»¯ng dÃ²ng khÃ´ng chá»©a tá»« khÃ³a Ä‘Ã³ thÃ¬ hÃ£y dÃ¹ng -v.

$ grep -v "chuoi" file_*

##  Äáº¿m sá»‘ káº¿t qá»§a

grep hoÃ n toÃ n cÃ³ thá»ƒ há»— trá»£ báº¡n Ä‘áº¿m xem trong file chá»‰ Ä‘á»‹nh cÃ³ bao nhiÃªu káº¿t qá»§a tráº£ vá» báº±ng cÃ¡ch dÃ¹ng -c. VÃ­ dá»¥ nhÆ° Ä‘áº¿m xem cÃ³ bao nhiÃªu báº£n ghi Ä‘Æ°á»£c insert trong file log.

 grep -c -w "INSERT" log_*

## Chá»‰ hiá»ƒn thá»‹ tÃªn file

ÄÆ¡n gá»‰an lÃ  váº­y, sáº½ cÃ³ case báº¡n chá»‰ quan tÃ¢m xem tá»« khÃ³a báº¡n Ä‘ang tÃ¬m xuáº¥t hiá»‡n trong nhá»¯ng file nÃ o thÃ´i. LÃºc Ä‘Ã³ hÃ£y dÃ¹ng lá»±a chá»n -l

$ grep -l -r -w "Error" *

## Hiá»ƒn thá»‹ sá»‘ thá»© tá»± cá»§a dÃ²ng káº¿t qá»§a

Trong má»™t file ráº¥t lá»›n thÃ¬ nhu cáº§u biáº¿t Ä‘Æ°á»£c xem káº¿t qá»§a á»Ÿ dÃ²ng nÃ o thÃ¬ tÃ´i nghÄ© luÃ´n lÃ  cáº§n thiáº¿t. grep hoÃ n toÃ n lÃ m Ä‘Æ°á»£c Ä‘iá»u nÃ y vá»›i lá»±a chá»n -n.

$ grep -n -w "Error" file_name

## á»¨ng dá»¥ng
Trong thá»±c táº¿ tÃ´i hay gáº·p nháº¥t cÃ³ láº½ lÃ  lá»‡nh kÃ©p kiá»ƒm tra xem má»™t chÆ°Æ¡ng trÃ¬nh nÃ o Ä‘Ã³ cÃ³ Ä‘ang cháº¡y hay khÃ´ng, báº±ng cÃ¡ch káº¿t há»£p ps vÃ  grep. VÃ­ dá»¥, vá»›i project Java thÃ¬ Ä‘Ã´i khi service tomcat Ä‘Ã´i khi vÃ¬ lÃ½ do nÃ o Ä‘Ã³ mÃ  nÃ³ bá»‹ cháº¿t nhÆ°ng tiáº¿n trÃ¬nh thÃ¬ váº«n cÃ²n nÃªn cáº§n vÃ o kill tiáº¿n trÃ¬nh Ä‘Ã³ Ä‘i rá»“i start láº¡i. TÃ´i hay dÃ¹ng lá»‡nh sau Ä‘á»ƒ biáº¿t Ä‘Æ°á»£c id tiáº¿n trÃ¬nh cá»§a tomcat ğŸ˜ƒ

# 3. tail

## Äá»ƒ hiá»ƒn thá»‹ 10 dÃ²ng cuá»‘i cá»§a file, báº¡n nháº­p vÃ o lá»‡nh sau:

tail name_of_file

Hoáº·c lÃ :

tail file_path

Káº¿t quáº£ sáº½ hiá»ƒn thá»‹ 10 dÃ²ng cuá»‘i

## Tale hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng dÃ²ng khi ngÆ°á»i dÃ¹ng Ä‘áº·t Ä‘á»‘i sá»‘ â€“n vÃ o trong lá»‡nh.

Lá»‡nh tail giá»›i háº¡n sá»‘ dÃ²ng Ä‘Æ°á»£c viáº¿t nhÆ° sau:

Tail â€“n* file_path

Báº¡n thay dáº¥u * báº±ng sá»‘ dÃ²ng muá»‘n in.

VÃ­ dá»¥, náº¿u báº¡n muá»‘n hiá»ƒn thá»‹ 2 dÃ²ng cuá»‘i cá»§a file, báº¡n nháº­p lá»‡nh sau:

tail -n2 devisers.txt

2 lÃ  sá»‘ dÃ²ng, cÃ²n devisers.txt lÃ  tÃªn file.

## Äá»ƒ xem nhá»¯ng bytes cuá»‘i cá»§a má»™t files lá»›n, báº¡n cÃ³ thá»ƒ dÃ¹ng option -c khi nháº­p lá»‡nh.

tail â€“c* file_path

Dáº¥u * lÃ  sá»‘ bytes. Thay nÃ³ báº±ng sá»‘ báº¡n muá»‘n xem.

## Äá»ƒ kiá»ƒm tra file cÃ³ thay Ä‘á»•i khÃ´ng, theo thá»i gian thá»±c báº¡n dÃ¹ng thÃªm option -f. NÃ³ cÅ©ng hiá»ƒn thá»‹ 10 dÃ²ng cuá»‘i, nhÆ°ng thay Ä‘á»•i theo thá»i gian thá»±c náº¿u file thay Ä‘á»•i. VÃ¬ váº­y nÃ³ hay Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ xem file log. Náº¿u file cÃ³ tÃªn lÃ  devisers.txt thÃ¬ lá»‡nh nháº­p nhÆ° sau:

tail -f devisers.txt

PhiÃªn báº£n má»›i hÆ¡n cá»§a tail command cÅ©ng giÃºp ngÆ°á»i dung xem nhiá»u file hoáº·c folder cÃ¹ng lÃºc. Khi file gá»‘c thay Ä‘á»•i, header sáº½ hiá»ƒn thá»‹ dÃ²ng mÃ  file thay Ä‘á»•i.

## Tail commands cÃ³ thá»ƒ káº¿t há»£p vá»›i cÃ¡c lá»‡nh Linux command khÃ¡c. ChÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng nÃ³ vá»›i:

### Sá»­ dá»¥ng Tail Command vá»›i -r (Reverse Order)

Táº¡i Ä‘Ã¢y, chÃºng ta sáº½ hiá»ƒn thá»‹ káº¿t quáº£ tail command theo thá»© tá»± ngÆ°á»£c láº¡i.

tail â€“n* file_name | sort -r

Pháº§n Ä‘áº§u cá»§a command lÃ  lá»‡nh thÃ´ng thÆ°á»ng, sau Ä‘Ã³ chÃºng ta tÃ¡ch nÃ³ ra báº±ng dáº¥u | Ä‘á»ƒ chá»‰ dáº«n lÃ m theo kiá»ƒu sáº¯p xáº¿p â€“ sort -r, â€“ tá»©c lÃ  sáº¯p xáº¿p kiá»ƒu ngÆ°á»£c láº¡i.

### Sá»­ dá»¥ng tail command vá»›i ls (File hoáº·c folder cÅ© nháº¥t)

Theo vÃ­ dá»¥ bÃªn dÆ°á»›i chÃºng ta sáº½ tháº¥y 7 files hoáº·c folder Ä‘Æ°á»£c thay Ä‘á»•i lÃ¢u nháº¥t trÆ°á»›c Ä‘Ã¢y.

Äá»ƒ xem, output cá»§a lá»‡nh ls sáº½ Ä‘Æ°a vÃ o trong tail command. CÃº phÃ¡p nhÆ° sau:

ls -l | tail -n8

Tail -n8 lÃ  báº¡n cÃ³ thá»ƒ Ä‘iá»n sá»‘ tÃ¹y Ã½ báº¡n muá»‘n vÃ o.
























